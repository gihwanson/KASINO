# AI 프롬프트 메모

## 1. 기본 규칙
- 기존 댓글과 동일한 의미·키워드를 유지하고 말투만 자연스럽게 변형한다.
- 기존 댓글의 존댓말/반말, 특수기호(~, !, ㅠ 등) 사용 여부를 그대로 따른다.
- 최대 글자 수는 `get_optimal_comment_length()`에서 받은 값 이내로 지키고, 너무 짧으면 최소 10자 이상 맞춘다.
- 금지어: `감사`, `감사합니다`, `감사해요`, `유용한 정보`, `잘 읽었습니다`, 형식적 표현.
- 마침표(`.`)와 `용` 어미 금지, 중복 어미(`요요`, `네요요`) 금지.
- 질문형 게시글에서 답을 모르면 댓글을 쓰지 않는다.

## 2. 도박/커뮤니티 용어 메모
- 자주 등장: `노돌`, `노발`, `댓노`, `포거래`, `텅장`, `역배`, `정배`, `부주력`, `몰빵`, `똥배`, `픽`, `슬롯`, `바카라`.
- 게시글/댓글에 나온 용어만 자연스럽게 재사용하고, 억지로 끼워 넣지 않는다.
- 같은 단어를 연속 댓글마다 반복하지 않도록 `analyze_comment_flow()` 결과를 참고한다.

## 3. 컨텍스트 분석 절차
1. **기존 댓글**: `get_existing_comments()` → 최근 8개 번호 매겨 prompt에 넣고, 스타일 분석(`analyze_comment_style`, `analyze_comment_flow`) 결과를 요약한다.
2. **스타일/길이**: 평균 길이, 특수기호 사용률, 끝말 패턴을 간단히 문장으로 붙이고, `max_comment_length`를 안내한다.
3. **본문 참고**: `extract_keywords_from_post()`로 뽑은 키워드만 bullet로 적고, 필요한 경우에만 사용하도록 지시한다. 본문 전체는 참고 섹션에만 둔다.
4. **추가 맥락**: 감정(`analyze_post_emotion`), 유형(`classify_post_type`), 시간대(`get_temporal_context`), 커뮤니티 용어(`extract_community_terms`)를 한두 줄씩 덧붙인다.

## 4. 간결 프롬프트 템플릿
```
⭐⭐⭐ 기존 댓글 우선 (최근 {N}개)
1. {댓글1}
...
- 위 댓글의 의미/키워드를 유지하고 말투만 변형
- 새로운 정보·다른 주제 추가 금지

🎛 스타일 & 길이
- 어미/특수기호: {분석 요약}
- 최대 {max_len}자 (기본 10자 이상)

🗂 본문 참고
- 키워드: {키워드 나열} (필요 시만 자연스럽게 사용)
- {시간대/감정/유형 요약}
- 본문: {본문 500자}

댓글:
```

이 템플릿에 섹션 1→2→3 순으로 데이터를 채워 `generate_ai_comment`와 `generate_ai_comment_retry`의 사용자 프롬프트에 넣는다.

